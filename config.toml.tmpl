[customizations.installer.kickstart]
contents = """
graphical
lang en_US.UTF-8
keyboard us
timezone UTC
network --bootproto=dhcp --device=link --activate --onboot=on --hostname=bootc
zerombr

autopart --type=plain

# https://docs.fedoraproject.org/en-US/fedora/f36/install-guide/appendixes/Kickstart_Syntax_Reference/#sect-kickstart-commands-users-groups
# Generate an ssh key using the command `openssl passwd -6`

rootpw --lock

reboot --eject
"""

[customizations.kernel]
# name - not yet supported (to assign a name)
append = "mitigations=off"

[[customizations.user]]
name = "{{ env.Getenv "USERNAME" }}"

description = "Administrator Account"
password = "{{ env.Getenv "PASSWORD_HASH" }}"
key = "{{ strings.TrimSpace (file.Read (env.Getenv "SSH_KEY_PATH")) }}"

# Add the user to specific groups. 'wheel' is common for granting sudo access.
groups = ["wheel", "users"]
shell = "/bin/bash"


home = "/var/home/{{ env.Getenv "USERNAME" }}"
